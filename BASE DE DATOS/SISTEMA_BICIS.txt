/* CREACION DE TABLAS SIN LLAVE FORANEA */

/* CREACION DE TABLA USUARIO*/

CREATE TABLE USUARIO(CLAVEUSER INT NOT NULL, APATERNO VARCHAR(50) NOT NULL,
AMATERNO VARCHAR(50) NOT NULL,NOMBRE VARCHAR(50) NOT NULL, CONTRASENA VARCHAR(50) NOT NULL, 
TIPO VARCHAR(50) NOT NULL,ESTADO VARCHAR(50) NOT NULL,FOTO LONGBLOB, PRIMARY KEY(CLAVEUSER));

/* CREACION DE TABLA TRABAJADOR */

CREATE TABLE TRABAJADOR(CLAVETRAB INT NOT NULL, APATERNO VARCHAR(50) NOT NULL,
AMATERNO VARCHAR(50) NOT NULL,NOMBRE VARCHAR(50) NOT NULL, CONTRASENA VARCHAR(50) NOT NULL,FOTO LONGBLOB, 
PRIMARY KEY(CLAVETRAB));

/* CREACION DE TABLA MARCA */

CREATE TABLE MARCA(IDMARCA INT NOT NULL, NMARCA VARCHAR(50) NOT NULL, PRIMARY KEY(IDMARCA));

/* CREACION DE TABLA ACCESO */

CREATE TABLE ACCESO(CLAVEACCESO INT NOT NULL AUTO_INCREMENT, DESCRIPCION VARCHAR(50) NOT NULL, PRIMARY KEY(CLAVEACCESO));


/* CREACION DE TABLAS CON LLAVE FORANEA */

/* CREACION DE TABLA BICICLETA */

CREATE TABLE BICICLETA(CLAVEBIC INT NOT NULL AUTO_INCREMENT, CLAVEUSER INT NOT NULL, IDMARCA INT NOT NULL, COLOR VARCHAR(50) NOT NULL,
FOTO LONGBLOB, ESTADO VARCHAR(50) NOT NULL, TIPO VARCHAR(50) NOT NULL, PRIMARY KEY(CLAVEBIC), FOREIGN KEY (CLAVEUSER) REFERENCES USUARIO(CLAVEUSER),
FOREIGN KEY (IDMARCA) REFERENCES MARCA(IDMARCA));

/* CREACION DE TABLA HISTORIAL */

CREATE TABLE HISTORIAL(CLAVEBIC INT NOT NULL, AUTORIZAENT INT, AUTORIZASAL INT,
FECHA VARCHAR(50), HENTRADA VARCHAR(50),ACCESOENT INT, HSALIDA VARCHAR(50),
ACCESOSAL INT, FOREIGN KEY (CLAVEBIC) REFERENCES BICICLETA(CLAVEBIC),
FOREIGN KEY (AUTORIZAENT) REFERENCES TRABAJADOR(CLAVETRAB),FOREIGN KEY (AUTORIZASAL) REFERENCES TRABAJADOR(CLAVETRAB),
FOREIGN KEY (ACCESOENT) REFERENCES ACCESO(CLAVEACCESO),FOREIGN KEY (ACCESOSAL) REFERENCES ACCESO(CLAVEACCESO));

/* DATOS DE TABLAS */

/* TABLA ACCESO */

INSERT INTO ACCESO (DESCRIPCION) VALUES ('Administración'),('Lenguas'),('Cultura Física'),('DAE'),('Servicio'),
('Biblioteca Central'), ('Contaduría'),('Arquitectura'),('Computación 14 Sur'),('Computación 14 Sur - San Claudio'),
('Ingeniería Quimica');

/* TABLA MARCA*/

INSERT INTO `marca`(`IDMARCA`, `NMARCA`) VALUES (1,'Alubike'),(2,'Benotto'),(3,'Magistroni'),(4,'Mercurio'),(5,'Turbo'),
(6,'Veloci'), (7,'CUBE Bikes'),(8,'BMC'),(9,'State Bicycle Co');
